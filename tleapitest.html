<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title></title>
    <link rel="stylesheet" type="text/css" href="js/easyui/themes/gray/easyui.css">
    <link rel="stylesheet" type="text/css" href="js/easyui/themes/icon.css">
    <script src="js/jquery/jquery-1.10.2.min.js"></script>
    <script type="text/javascript" src="js/easyui/jquery.easyui.min.js"></script>
</head>
<body>
<button onclick="dosth()">经纬度转换</button>
<script type="text/javascript">
    function dosth(){
        var lonlat={
            'lon':121,
            'lat':32
        }
        var getSth=lonLat2WebMercator(lonlat);
        alert(getSth.x);
    }
    //经纬度转Web墨卡托
    function lonLat2WebMercator(lonLat) {
        var x = lonLat.lon;
        var y = lonLat.lat;

        var xEnd = (x / 180.0) * 20037508.34;

        if (y > 85.05112) {
            y = 85.05112;
        }

        if (y < -85.05112) {
            y = -85.05112;
        }

        y = (Math.PI / 180.0) * y;
        var tmp = Math.PI / 4.0 + y / 2.0;
        var yEnd = 20037508.34 * Math.log(Math.tan(tmp)) / Math.PI;

        return {
            'x': xEnd,
            'y': yEnd
        }
    }
    //Web墨卡托转经纬度
    function WebMercator2lonLat(mercator) {
        var x = mercator.x;
        var y = mercator.y;

        var lon = x / 20037508.34 * 180;
        var mmy = y / 20037508.34 * 180;
        var lat = 180 / Math.PI * (2 * Math.atan(Math.exp(mmy * Math.PI / 180)) - Math.PI / 2);

        return{
            'lon':lon,
            'lat':lat
        }
    }
</script>
<button onclick="gettle()">slfjsljlsjk</button>
<script type="text/javascript">
    //    url: "https://www.space-track.org/basicspacedata/query/class/tle_latest/ORDINAL/1/NORAD_CAT_ID/37820/orderby/TLE_LINE1 ASC/format/3le",
    function gettle() {
        $.ajax({
            url: "php/getTLE/getTLE.php",
            data: {satNumber: 27550},
            type: "POST",
            dataType: 'json',
            success: function (data) {
                console.log(data);
                //不能直接转换为json对象，
                var dataslice = data.slice(1, data.length - 1);
                console.log(dataslice);

                //值得一提的是，此时从服务器端传输过来的data还不是真正的JSON格式，需要进一步的处理，
                //将其转化为真正的JSON对象
                var ret = $.parseJSON(dataslice);
                //alert(ret);//显示的是object
                console.log(ret);
                console.log(ret.TLE_LINE0);
                console.log(ret.TLE_LINE1);
                console.log(ret.TLE_LINE2);
            },
            error: function (err) {
                alert(err);
            }
        });
    }

</script>
</body>
</html>